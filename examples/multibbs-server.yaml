global:
  plugin_path:
  timezone: Asia/Tokyo

plugins:
  - module: Aggregator::Simple
  - module: Server::Engine::PreFork

  - module: Server::Protocol::HTTP
    config:
        port: 10080
        host: 192.168.0.1

  - module: Server::Protocol::SMTP
    config:
        port: 10025
        host: 192.168.0.1

  - module: Server::Protocol::POP3
    config:
        port: 10110
        host: 192.168.0.1
        user: user
        password: password

  - module: Server::Pull::SimpleBbs
    rule:
      expression: $args->{req}->protocol->service eq 'http' && $args->{req}->protocol->uri->path =~ m!^/bbs! && $args->{feed}->link =~ m!^pserv://bbs/!


  - module: Server::Pull::SimpleMailBbs
    rule:
      expression: $args->{req}->protocol->service eq 'smtp' && $args->{feed}->link =~ m!^pserv://bbs/!

  - module: Server::Pull::POP3
    rule:
      expression: $args->{req}->protocol->service eq 'pop3'

  - module: Server::Pull::LivedoorReader
    rule:
      expression: $args->{req}->protocol->service eq 'http' && $args->{req}->protocol->uri->path =~ m!^/+api/!

  - module: Subscription::Config
    config:
      feed:
        - url: file:///tmp/multibbs.xml

  - module: Publish::Feed
    config:
      format: RSS
      dir: /tmp
      filename: multibbs.xml
